{% extends "/admin/base.html" %}

{% block body %}
<!-- Alerts -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

<div class="container">
    <h1 class="m-5 fw-bold">Settings</h1>
    <div class="row m-5 text w-50">
        <div class="col">
            <form action="/admin/change-restaurant-name" method="POST" class="needs-validation" novalidate>
                <label class="form-label fw-bold">Restaurant Name</label>
                <input name="restaurant_name" type="text" class="form-control" placeholder="{{  session['restaurant_name']  }}" required> 
                <div class="invalid-feedback">Please complete mandatory field.</div>   
                <button type="submit" class="btn bg-green mt-3">Update</button>
            </form>
        </div>    
    </div>
    <div class="row m-5 w-50">
        <div class="col">
            <form action="/admin/change-password" method="POST" class="needs-validation" novalidate>
                <label class="form-label fw-bold">Password</label>
                <input name="current_password" type="password" class="form-control mt-2" placeholder="Current password" required>
                <input name="new_password" type="password" class="form-control mt-2" placeholder="New password" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" required> 
                <div class="invalid-feedback">Your password should be at least 8 characters long, contain both lower and upper-case letters, and include either a number or a symbol.</div>   
                <input name="confirm_password" type="password" class="form-control mt-2" placeholder="Confirm new password" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" required>
                <div class="invalid-feedback">The new passwords you entered don't match. Please try again.</div>   
                <button type="submit" class="btn bg-green mt-3">Update</button>
            </form>
        </div>    
    </div>
    <div class="row m-5 w-50">
        <div class="col">
            <form action="/admin/update-background" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
                <label class="form-label fw-bold">Restaurant Background Image</label>
                <input id="backgroundInput" class="w-100" type="file" name="file" accept=".png, .jpg, .jpeg">
                <div id="dimensionFeedback" class="text-danger mt-3"></div>
                <button id="backgroundUpdate" class="btn bg-green mt-3" type="submit">Update</button>
            </form>
        </div>    
    </div><div class="row m-5 w-50">
        <div class="col">
            <form action="/admin/update-logo" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
                <label class="form-label fw-bold">Restaurant Icon Image</label>
                <input id="logoInput" class="w-100" type="file" name="file" accept=".png, .jpg, .jpeg">
                <div id="dimensionFeedback2" class="text-danger mt-3"></div>
                <button id="logoUpdate" class="btn bg-green mt-3" type="submit">Update</button>
            </form>
        </div>    
    </div>
</div>
{% endblock %}